(this.webpackJsonpcoolcanvas=this.webpackJsonpcoolcanvas||[]).push([[0],{14:function(e,t,n){},18:function(e,t,n){},20:function(e,t,n){"use strict";n.r(t);var i=n(0),r=n.n(i),a=n(7),s=n.n(a),c=(n(14),n(6)),o=n.n(c),u=n(8),g=n(4);var h=n(9),d=(n(18),n(2)),f=n(3),v=function(){function e(t,n){Object(d.a)(this,e),this.canvasImageSource=void 0,this.center=void 0,this._dragState=new w,this.canvasImageSource=t,this.center=n}return Object(f.a)(e,[{key:"width",get:function(){return+this.canvasImageSource.width}},{key:"height",get:function(){return+this.canvasImageSource.height}},{key:"edges",get:function(){return{left:this.center.x-this.width/2,right:this.center.x+this.width/2,top:this.center.y-this.height/2,bottom:this.center.y+this.height/2}}},{key:"corners",get:function(){return{topLeft:new b(this.edges.left,this.edges.top),bottomLeft:new b(this.edges.left,this.edges.bottom),topRight:new b(this.edges.right,this.edges.top),bottomRight:new b(this.edges.right,this.edges.bottom)}}},{key:"dragState",get:function(){return this._dragState}},{key:"containsPoint",value:function(e){return e.x<=this.edges.right&&e.x>=this.edges.left&&e.y>=this.edges.top&&e.y<=this.edges.bottom}},{key:"setDragging",value:function(e,t){var n=t?t.subtract(this.center):void 0;this._dragState=new w(e,n)}}]),e}(),l=function(){function e(t,n){Object(d.a)(this,e),this.canvas=void 0,this.canvasElements=void 0,this.canvas=t,this.canvasElements=n}return Object(f.a)(e,[{key:"context",get:function(){return this.canvas.getContext("2d")}},{key:"elementBeingDragged",get:function(){return this.canvasElements.find((function(e){return e.dragState.isBeingDragged}))}},{key:"adjustCanvasSize",value:function(e,t){this.canvas.width=e,this.canvas.height=t}},{key:"drawImages",value:function(){for(var e=this.canvasElements.length-1;e>=0;e--){var t=this.canvasElements[e];t.dragState.isBeingDragged&&this.drawBorder(t),this.drawImage(t)}}},{key:"drawImage",value:function(e){(new Path2D).rect(510,0,e.width,e.height),this.context.drawImage(e.canvasImageSource,e.edges.left,e.edges.top,e.width,e.height)}},{key:"drawBorder",value:function(e){this.context.fillStyle="green",this.context.fillRect(e.edges.left-2,e.edges.top-2,e.width+4,e.height+4)}},{key:"render",value:function(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.drawImages()}}]),e}(),w=function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Object(d.a)(this,e),this.isBeingDragged=void 0,this.draggingOffset=void 0,this.isBeingDragged=t,this.draggingOffset=n},b=function(){function e(t,n){Object(d.a)(this,e),this.x=void 0,this.y=void 0,this.x=t,this.y=n}return Object(f.a)(e,[{key:"subtract",value:function(t){return new e(this.x-t.x,this.y-t.y)}},{key:"add",value:function(t){return new e(this.x+t.x,this.y+t.y)}}]),e}(),m=function(e){var t=e.pageX-(e.currentTarget.offsetLeft||0),n=e.pageY-(e.currentTarget.offsetTop||0);return new b(t,n)},j=n(1),O=function(e){var t=Object(i.useRef)(null),n=function(){var e=Object(i.useState)({width:0,height:0}),t=Object(g.a)(e,2),n=t[0],r=t[1];return Object(i.useEffect)((function(){function e(){r({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),n}(),r=Object(i.useRef)(),a=function(e){var t=new b(e.width/2,e.height/2);return new v(e,t)},s=function(){if(r.current){var e=window.innerWidth;r.current.adjustCanvasSize(e,Math.floor(e/16*9)),r.current.canvasElements.forEach(u),r.current.render()}},c=Object(i.useCallback)(Object(h.debounce)((function(){return s()}),20),[]),o=Object(i.useCallback)((function(){r.current=new l(t.current,e.images.map(a))}),[e.images]),u=function(e){if(r.current){var t=r.current.canvas.width,n=r.current.canvas.height;e.edges.left<0&&(e.center.x=e.width/2),e.edges.right>t&&(e.center.x=t-e.width/2),e.edges.top<0&&(e.center.y=e.height/2),e.edges.bottom>n&&(e.center.y=n-e.height/2)}};return Object(i.useEffect)((function(){return o()}),[o]),Object(i.useEffect)((function(){return c}),[c,n]),Object(j.jsx)("canvas",{ref:t,onMouseDown:function(e){if(r.current){var t=m(e),n=r.current.canvasElements.find((function(e){return e.containsPoint(t)}));n&&n.setDragging(!0,t),r.current.render()}},onMouseUp:function(e){r.current&&(r.current.elementBeingDragged&&r.current.elementBeingDragged.setDragging(!1),r.current.render())},onMouseMove:function(e){if(r.current){var t=r.current.elementBeingDragged;if(t){if(!t.dragState.draggingOffset)throw Error('Element being dragged without "draggingOffset" set');var n=m(e);t.center=n.subtract(t.dragState.draggingOffset),u(t),r.current.render()}}}})},y=n.p+"static/media/dog.1457c39d.png",p=n.p+"static/media/cat.2cabeee5.png",x=function(e){return new Promise((function(t,n){var i=new Image;i.addEventListener("load",(function(){t(i)})),i.addEventListener("error",n),i.src=e}))},k=[p,y];var S=function(){var e=Object(i.useState)(),t=Object(g.a)(e,2),n=t[0],r=t[1],a=Object(i.useCallback)(Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(k.map((function(e){return x(e)})));case 2:t=e.sent,r(t);case 4:case"end":return e.stop()}}),e)}))),[]);return Object(i.useEffect)((function(){a()}),[a]),Object(j.jsx)(j.Fragment,{children:n&&Object(j.jsx)(O,{images:n})})},E=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,21)).then((function(t){var n=t.getCLS,i=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),i(e),r(e),a(e),s(e)}))};s.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(S,{})}),document.getElementById("root")),E()}},[[20,1,2]]]);
//# sourceMappingURL=main.37b9c9c4.chunk.js.map